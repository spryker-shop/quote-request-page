{% extends model('component') %}

{% define config = {
    name: 'quote-request-delivery-summary',
} %}

{% define data = {
    quote: required,
    quoteRequestReference: false,
    hasMultiShipments: false,
    isEditable: false,
    isAgent: false,
} %}

{% block body %}

    <div class="box">
        <h6>{{ 'checkout.step.summary.delivery_address' | trans }}</h6>
        <hr>
        {% if data.hasMultiShipments %}
            {{ 'Multiple shipment methods.' | trans }}
        {% elseif data.quote.shipment and  data.quote.shipment.shippingAddress %}
            {% embed molecule('display-address') with {
                data: {
                    address: data.quote.shipment.shippingAddress,
                },
            } only %}
                {% block addressBadgeLabel %}{% endblock %}
            {% endembed %}
        {% endif %}

        {% if not data.hasMultiShipments and (not data.quote.shipment or not data.quote.shipment.shippingAddress) %}
            {{ 'No address added.' | trans }}
            {% if data.isEditable and data.quoteRequestReference %}
                <a href="{{ url('agent/quote-request/checkout-address', {quoteRequestReference: data.quoteRequestReference}) }}" title="{{ 'quote_request_agent_page.add_address.button' | trans }}" {{ qa('cart-go-to-address') }}>
                    {{ 'quote_request_agent_page.add_address.button' | trans }}dddddd
                </a>

                <a href="{{ url('checkout-address') }}" title="{{ 'quote_request_agent_page.add_address.button' | trans }}" {{ qa('cart-go-to-address') }}>
                    {{ 'quote_request_agent_page.add_address.button' | trans }}
                </a>
            {% endif %}
        {% else %}
            {% if data.isEditable and data.quoteRequestReference%}
                <a href="{{ url('checkout-address') }}" title="{{ 'general.edit.button' | trans }}" {{ qa('cart-go-to-address') }}>
                    {{ 'general.edit.button' | trans }}dddddd
                </a>

                <a href="{{ url('agent/quote-request/checkout-address', {quoteRequestReference: data.quoteRequestReference}) }}" title="{{ 'general.edit.button' | trans }}" {{ qa('cart-go-to-address') }}>
                    {{ 'general.edit.button' | trans }}
                </a>
            {% endif %}
        {% endif %}
    </div>

    <div class="box">
        <h6>{{ 'checkout.step.summary.delivery_method' | trans }}</h6>
        <hr>
        {% if data.hasMultiShipments %}
            {{ 'Multiple delivery addresses.' | trans }}
        {% elseif data.quote.shipment and data.quote.shipment.method %}
            {% include molecule('delivery-information', 'CustomerPage') ignore missing with {
                data: {
                    carrierName: data.quote.shipment.method.carrierName,
                    methodName: data.quote.shipment.method.name,
                    storeCurrencyPrice: data.quote.shipment.method.storeCurrencyPrice,
                    currencyIsoCode: data.quote.shipment.method.currencyIsoCode,
                },
            } only %}
        {% endif %}

        {% if not data.hasMultiShipments and (not data.quote.shipment or not data.quote.shipment.shippingAddress) %}
            {{ 'No shipment method added.' | trans }}
            {% if data.isEditable and data.quoteRequestReference %}
                <a href="{{ url('agent/quote-request/checkout-shipment', {quoteRequestReference: data.quoteRequestReference}) }}" title="{{ 'quote_request_agent_page.add_shipment.button' | trans }}" {{ qa('cart-go-to-shipment') }}>
                    {{ 'quote_request_agent_page.add_shipment.button' | trans }}ssssss
                </a>


                <a href="{{ url('checkout-shipment') }}" title="{{ 'quote_request_agent_page.add_shipment.button' | trans }}" {{ qa('cart-go-to-shipment') }}>
                    {{ 'quote_request_agent_page.add_shipment.button' | trans }}
                </a>
            {% endif %}
        {% else %}
            {% if data.isEditable and data.quoteRequestReference%}
                <a href="{{ url('agent/quote-request/checkout-shipment', {quoteRequestReference: data.quoteRequestReference}) }}" title="{{ 'general.edit.button' | trans }}" {{ qa('cart-go-to-shipment') }}>
                    {{ 'general.edit.button' | trans }}sssssss
                </a>

                <a href="{{ url('checkout-shipment') }}" title="{{ 'general.edit.button' | trans }}" {{ qa('cart-go-to-shipment') }}>
                    {{ 'general.edit.button' | trans }}
                </a>
            {% endif %}
        {% endif %}
    </div>

    {% if data.quote.billingAddress %}
        <div class="box">
            <h6>{{ 'checkout.step.summary.billing_address' | trans }}</h6>
            <hr>
            {% embed molecule('display-address') with {
                data: {
                    address: data.quote.billingAddress,
                },
            } only %}
                {% block addressBadgeLabel %}{% endblock %}
            {% endembed %}
        </div>
    {% endif %}

{% endblock %}
