{% extends model('component') %}

{% define config = {
    name: 'quote-request-discount-summary',
    tag: 'li'
} %}

{% define data = {
    voucherDiscounts: null,
    ruleDiscounts: null,
    discountTotal: null,
    currency: required,
    isQuoteEditable: false,
} %}

{% block extraClass %}
    list__item
{% endblock %}

{% block component %}
    {% if data.discountTotal and (data.voucherDiscounts is not empty or data.ruleDiscounts is not empty) %}
        <li class="list__item">
            <hr>
        </li>
        {{parent()}}
    {% endif %}
{% endblock %}

{% block body %}
    {% if data.voucherDiscounts is not empty %}
        {% if data.isQuoteEditable %}
            <a class="float-right text-small" href="{{ url('discount/voucher/clear') }}">
                {% include atom('icon') with {
                    modifiers: ['smaller'],
                    data: {
                        name: 'times'
                    }
                } only %}
                {{ 'cart.vouchers.clear-all' | trans }}
            </a>
        {% endif %}
        <strong>{{ 'cart.vouchers' | trans }}</strong>
        <ul>
            {% for voucherDiscount in data.voucherDiscounts %}
                <li class="grid grid--justify">
                    <span class="col col--sm-8">
                        {{ voucherDiscount.displayName }}
                        {% if data.isQuoteEditable %}
                            <br>
                            <a class="text-small" href="{{ url('discount/voucher/remove', {'code': voucherDiscount.voucherCode}) }}">
                                {% include atom('icon') with {
                                    modifiers: ['smaller'],
                                    data: {
                                        name: 'times'
                                    }
                                } only %}
                                {{ 'cart.voucher.remove' | trans }}
                            </a>
                        {% endif %}
                    </span>
                    <span class="col col--expand text-right">- {{ voucherDiscount.amount | money(true, data.currency.code) }}</span>
                </li>
            {% endfor %}
        </ul>
    {% endif %}

    {% if data.ruleDiscounts is not empty %}
        <strong>{{ 'cart.discounts' | trans }}</strong>
        <ul>
            {% for ruleDiscount in data.ruleDiscounts %}
                <li class="grid grid--justify">
                    <span class="col col--sm-8">{{ ruleDiscount.displayName }}111</span>
                    <span class="col col--expand text-right">- {{ ruleDiscount.amount | money(true, data.currency.code) }}</span>
                </li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock %}
